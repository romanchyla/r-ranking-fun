(function(e){function t(t){for(var a,r,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)r=o[d],s[r]&&p.push(s[r][0]),s[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var l=n[o];0!==s[l]&&(a=!1)}a&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},s={app:0},i=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0b24":function(e,t,n){},"123e":function(e,t,n){"use strict";var a=n("5387"),s=n.n(a);s.a},"2fe3":function(e,t,n){"use strict";var a=n("90e6"),s=n.n(a);s.a},3299:function(e,t,n){},"433c":function(e,t,n){"use strict";var a=n("5e4e"),s=n.n(a);s.a},"4c1c":function(e,t,n){},5387:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("744f"),n("6c7b"),n("7514"),n("20d6"),n("1c4c"),n("6762"),n("cadf"),n("e804"),n("55dd"),n("d04f"),n("c8ce"),n("217b"),n("7f7f"),n("f400"),n("7f25"),n("536b"),n("d9ab"),n("f9ab"),n("32d7"),n("25c9"),n("9f3c"),n("042e"),n("c7c6"),n("f4ff"),n("049f"),n("7872"),n("a69f"),n("0b21"),n("6c1a"),n("c7c62"),n("84b4"),n("c5f6"),n("2e37"),n("fca0"),n("7cdf"),n("ee1d"),n("b1b1"),n("87f3"),n("9278"),n("5df2"),n("04ff"),n("f751"),n("4504"),n("fee7"),n("ffc1"),n("0d6d"),n("9986"),n("8e6e"),n("25db"),n("e4f7"),n("b9a1"),n("64d5"),n("9aea"),n("db97"),n("66c8"),n("57f0"),n("165b"),n("456d"),n("cf6a"),n("fd24"),n("8615"),n("551c"),n("097d"),n("df1b"),n("2397"),n("88ca"),n("ba16"),n("d185"),n("ebde"),n("2d34"),n("f6b3"),n("2251"),n("c698"),n("a19f"),n("9253"),n("9275"),n("3b2b"),n("3846"),n("4917"),n("a481"),n("28a5"),n("386d"),n("6b54"),n("4f7f"),n("8a81"),n("ac4d"),n("8449"),n("9c86"),n("fa83"),n("48c0"),n("a032"),n("aef6"),n("d263"),n("6c37"),n("9ec8"),n("5695"),n("2fdb"),n("d0b0"),n("b54a"),n("f576"),n("ed50"),n("788d"),n("14b9"),n("f386"),n("f559"),n("1448"),n("673e"),n("242a"),n("c66f"),n("b05c"),n("34ef"),n("6aa2"),n("15ac"),n("af56"),n("b6e4"),n("9c29"),n("63d9"),n("4dda"),n("10ad"),n("c02b"),n("4795"),n("130f"),n("ac6a"),n("96cf");var a=n("2b0e"),s=n("ce5b"),i=n.n(s);n("bf40");a["default"].use(i.a,{});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-navigation-drawer",{attrs:{app:"",persistent:"",clipped:e.clipped,"mini-variant":e.miniVariant,"enable-resize-watcher":"",fixed:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{staticClass:"pt-0",attrs:{dense:""}},e._l(e.items,function(t,a){return n("v-list-tile",{key:a,attrs:{to:"#"==t.path?"":t.path+(e.$route.params.id?e.$route.params.id:"")}},[n("v-list-tile-action",[n("v-icon",[e._v(e._s(t.icon))])],1),n("v-list-tile-content",[n("v-list-tile-title",[e._v(e._s(t.title))])],1)],1)}))],1),n("v-toolbar",{attrs:{app:"","clipped-left":e.clipped}},[n("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),n("v-btn",{attrs:{icon:""},on:{click:function(t){t.stopPropagation(),e.miniVariant=!e.miniVariant}}},[n("v-icon",{domProps:{innerHTML:e._s(e.miniVariant?"chevron_right":"chevron_left")}})],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){t.stopPropagation(),e.clipped=!e.clipped}}},[n("v-icon",[e._v("web")])],1)],1),n("v-content",[n("router-view")],1),n("v-footer",{attrs:{fixed:e.fixed,app:""}},[n("span",[e._v("Â© 2017")])])],1)},o=[],l={name:"App",data:function(){return{clipped:!1,drawer:!0,fixed:!1,items:[{icon:"bubble_chart",title:"Scoring Simulateur",path:"/"},{title:"Dashboard",icon:"dashboard",path:"/dashboard"},{title:"Experiment Setup",icon:"description",path:"/experiment/overview/"},{title:"Returned Documents",icon:"view_headline",path:"/experiment/articles/"},{title:"Selected Relevant Papers",icon:"assessment",path:"/experiment/selection/"},{title:"Experiment Results",icon:"build",path:"/experiment/results/"}],miniVariant:!1,right:!0,rightDrawer:!1,title:""}},methods:{handleMenuClick:function(){console.log("clicked!")}}},c=l,u=n("2877"),d=Object(u["a"])(c,r,o,!1,null,null,null);d.options.__file="App.vue";var p=d.exports,m=n("8c4f"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("div",{staticClass:"hello"},[n("h1",[e._v("ADS Scoring "),n("i",[e._v("Simulateur")])]),n("p",[e._v("Hi "+e._s(e.name)+"! Pleasure to meet you.")]),n("p",[e._v("In here you can help improve quality of the search results at ADS. We will do so by running (few hundred thousands of) experiments\n    and try to find best set of parameters for the relevance score used by our search engine.")]),n("p",[e._v("In order to run experiments, we'd like to ask of you the following:")]),n("ol",[n("li",[e._v("make (arbitrary) new request")]),n("li",[e._v("review returned results and select papers that are most relevant "),n("b",[e._v("to you")])]),n("li",[e._v("(optionally) re-order the selected papers, to have the most relevant papers on top")])]),n("p",[e._v("We will run our simulations and try to derive the best set of parameters that produce the best search results. It is no black\n    magic and we do not promise miracles, but as we gather more data, we'll be able to do more and more. Oh, btw - we'll use the \n    derived parameters to reorder your existing search results - so you will be able to see them (almost real time).")])])])},v=[],h={name:"WelcomePage",props:{name:String}},b=h,x=(n("123e"),Object(u["a"])(b,f,v,!1,null,"83dae936",null));x.options.__file="WelcomePage.vue";var g=x.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("div",[e._v("\n        Please use dashboard as a starting point.\n\n        If you did, then this feature is probably not implemented yet.\n    ")])])},y=[],w={},k=w,S=(n("433c"),Object(u["a"])(k,_,y,!1,null,null,null));S.options.__file="NotFound.vue";var R=S.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-data-table",{staticClass:"dashboard",attrs:{headers:e.headers,items:e.experiments,"item-key":"eid"},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",[e._v(e._s(t.item.eid))]),n("td",[n("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"props.selected"}})],1),n("td",{on:{click:function(n){e.doClick("show",t.item)}}},[e._v(e._s(t.item.query))]),n("td",[e._v(e._s(t.item.reporter))]),n("td",{attrs:{title:"numFound/numUsed/numGolden"}},[e._v(e._s(t.item.info))])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),n("div",[n("v-btn",{attrs:{color:"green"},on:{click:function(t){e.doClick("create")}}},[e._v("Create")]),n("v-btn",{attrs:{color:"info"},on:{click:function(t){e.doClick("show")}}},[e._v("Show")]),n("v-btn",{attrs:{color:"warning"},on:{click:function(t){e.doClick("run")}}},[e._v("(Re-)Run")]),n("v-btn",{attrs:{color:"success"},on:{click:function(t){e.doClick("copy")}}},[e._v("Copy")])],1)],1)},z=[],C={data:function(){return{selected:[],headers:[{text:"ID",value:"eid",sortable:!0},{text:"Selected",value:"selected",sortable:!1},{text:"Query",align:"left",sortable:!0,value:"query"},{text:"Reporter",value:"reporter"},{text:"Info",value:"numused"}]}},computed:{experiments:function(){return this.$store.state.dashboard}},mounted:function(){this.$store.dispatch("refreshDashboard")},methods:{doClick:function(e,t){var n=this;if("show"===e){if(t)this.$store.dispatch("loadExperiment",{eid:t.eid}).then(function(){n.$router.push({path:"/experiment/overview/"+t.eid})});else if(this.selected.length>0){console.log(this.selected,this.$data.selected[0]);var a=this.selected[0];this.$store.dispatch("loadExperiment",{eid:a.eid}).then(function(){n.$router.push({path:"/experiment/overview/"+a.eid})})}}else"create"===e?this.$store.dispatch("createExperiment").then(function(){n.$router.push({path:"/experiment/overview/"+n.$store.state.experiment.eid})}):"run"==e&&this.$store.dispatch("getResults",{eid:this.selected[0].eid}).then(function(){n.$router.push({path:"/experiment/results/"+n.$store.state.experiment.eid})})}}},P=C,L=(n("2fe3"),Object(u["a"])(P,$,z,!1,null,null,null));L.options.__file="Dashboard.vue";var E=L.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-text",[n("v-form",{ref:"form"},[n("v-layout",{attrs:{row:"",wrap:""}},[e._v("\n          Experiment ID: "+e._s(e.eid)+"\n        "),n("v-flex",{attrs:{lg12:"",sm12:""}},[n("v-text-field",{attrs:{label:"Reporter",name:"reporter"},model:{value:e.reporter,callback:function(t){e.reporter=t},expression:"reporter"}})],1),n("v-flex",{attrs:{lg12:"",sm12:""}},[n("v-text-field",{attrs:{label:"Query",name:"query"},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}})],1),n("v-flex",{attrs:{lg12:"",sm12:""}},[n("v-text-field",{attrs:{label:"Additional Parameters (url format)",name:"extra_params",hint:"All parameters must be properly URL encoded"},model:{value:e.extra_params,callback:function(t){e.extra_params=t},expression:"extra_params"}})],1),n("v-flex",{attrs:{lg12:"",sm12:""}},[n("v-textarea",{attrs:{outline:"",label:"Description",hint:"Please describe your intent while making the search, this helps us evaluate search results/selections"}})],1),n("v-spacer")],1),n("div",[n("v-checkbox",{attrs:{label:"simulate k1 parameter"},model:{value:e.useK,callback:function(t){e.useK=t},expression:"useK"}}),n("v-layout",{attrs:{row:"",wrap:""}},[e._v('\n          k1 parameter controls the steepness of the slope; it affects the "TF" components of the BM25 formula; a higher values might lead to a fast \n      raising length normalization (effectively disregarding difference between documents with different term frequencies; however it is not \n      constant). Typically, the value of k1 is around 1.2 - however, try experimenting with large ranges (it is the CPU that will do the computations\n      anyway)\n          '),n("v-flex",{staticStyle:{width:"60px"},attrs:{shrink:""}},[n("v-text-field",{staticClass:"mt-0",attrs:{"hide-details":"","single-line":"",type:"number"},model:{value:e.kRange[0],callback:function(t){e.$set(e.kRange,0,t)},expression:"kRange[0]"}})],1),n("v-flex",[n("v-range-slider",{attrs:{max:10,min:0,step:e.kStepSize},model:{value:e.kRange,callback:function(t){e.kRange=t},expression:"kRange"}})],1),n("v-flex",{staticStyle:{width:"60px"},attrs:{shrink:""}},[n("v-text-field",{staticClass:"mt-0",attrs:{"hide-details":"","single-line":"",type:"number"},model:{value:e.kRange[1],callback:function(t){e.$set(e.kRange,1,t)},expression:"kRange[1]"}}),n("v-select",{staticClass:"mt-0",attrs:{hint:"Step size",items:[.01,.1,1,10,100],"single-line":"",readonly:!1},model:{value:e.kStepSize,callback:function(t){e.kStepSize=t},expression:"kStepSize"}})],1)],1)],1),n("div",[n("v-checkbox",{attrs:{label:"simulate b parameter"},model:{value:e.useB,callback:function(t){e.useB=t},expression:"useB"}}),n("v-layout",{attrs:{row:"",wrap:""}},[e._v("\n              b parameter influences how much of a length normalization bears onto the final score (in BM25 score). Lucene's default value is 0.75; \n              when b=0.0, length normalization is effectively disabled.\n              "),n("v-flex",{staticStyle:{width:"60px"},attrs:{shrink:""}},[n("v-text-field",{staticClass:"mt-0",attrs:{"hide-details":"","single-line":"",type:"number"},model:{value:e.bRange[0],callback:function(t){e.$set(e.bRange,0,t)},expression:"bRange[0]"}})],1),n("v-flex",[n("v-range-slider",{attrs:{max:1,min:0,step:e.bStepSize},model:{value:e.bRange,callback:function(t){e.bRange=t},expression:"bRange"}})],1),n("v-flex",{staticStyle:{width:"60px"},attrs:{shrink:""}},[n("v-text-field",{staticClass:"mt-0",attrs:{"hide-details":"","single-line":"",type:"number"},model:{value:e.bRange[1],callback:function(t){e.$set(e.bRange,1,t)},expression:"bRange[1]"}}),n("v-select",{staticClass:"mt-0",attrs:{hint:"Step size",items:[.01,.1,1,10,100],"single-line":""},model:{value:e.bStepSize,callback:function(t){e.bStepSize=t},expression:"bStepSize"}})],1)],1)],1),n("div",[n("v-checkbox",{attrs:{label:"simulate different document lengths"},model:{value:e.useDocLen,callback:function(t){e.useDocLen=t},expression:"useDocLen"}}),e._v("\n\n          Here we can try to experiment with document lengths - lucene will typically use arithmetical mean; but we could try to see what happens if we\n          assume median values. The beauty of BM25 algorithm is in the nice document length normalizations so it might be worthwhile to play with the \n          length (becuase it is important). \n\n          This requires judicious application from your side - obviously, you should have some knowledge of document lengths (in the given index)\n          and it should not be used for multi-field queries (unless we can assume the fields are roughly the same size). "),n("br"),e._v("\n\n          Note: in the future, we should give you options to specify doc lenghts for various fields.\n          \n          "),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{staticStyle:{width:"60px"},attrs:{shrink:""}},[n("v-text-field",{staticClass:"mt-0",attrs:{"hide-details":"","single-line":"",type:"number"},model:{value:e.docLenRange[0],callback:function(t){e.$set(e.docLenRange,0,t)},expression:"docLenRange[0]"}})],1),n("v-flex",[n("v-range-slider",{attrs:{max:100,min:0,step:e.docStepSize},model:{value:e.docLenRange,callback:function(t){e.docLenRange=t},expression:"docLenRange"}})],1),n("v-flex",{staticStyle:{width:"60px"},attrs:{shrink:""}},[n("v-text-field",{staticClass:"mt-0",attrs:{"hide-details":"","single-line":"",type:"number"},model:{value:e.docLenRange[1],callback:function(t){e.$set(e.docLenRange,1,t)},expression:"docLenRange[1]"}}),n("v-select",{staticClass:"mt-0",attrs:{hint:"Step size",items:[.01,.1,1,10,100],"single-line":"",readonly:!1},model:{value:e.docStepSize,callback:function(t){e.docStepSize=t},expression:"docStepSize"}})],1)],1)],1),n("div",[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{lg12:"",sm12:""}},[n("v-checkbox",{attrs:{label:"Normalize Weight"},model:{value:e.useNormalization,callback:function(t){e.useNormalization=t},expression:"useNormalization"}}),n("p",[e._v("\n                  Imagine TF*IDF scoring formula. The IDF component depends on the corpus and partially (but significantly) influences magnitude\n                  of the resulting product (a high IDF - for a rare term - will lead to high score). Now imagine also, that your query searches\n                  two fields - one of the fields has very high boost, say: "),n("b",[e._v("title^1000,abstract^1")]),e._v(" -- any match in the title will be thousand\n                  times stronger than the abstract. \n              ")]),n("p",[e._v("\n                  Normalization is Lucene's attempt to arrive at scores that could be compared (between queries). It will still make the title \n                  to be thousand times stronger, but the weight will now be 1/1000 as opposed to 1000 (just an example). It is done by collecting \n                  all weights (for every term) in a query, summing them and then dividing every weight by this quantity. However, do not think\n                  that the final score is normalized. The final result still depends on product of TF*IDF - and TF is not normalized (and cannot\n                  be, it depends on a document lenght/frequencies etc). It is only the "),n("b",[e._v("weight")]),e._v(" (which roughly corresponds to IDF) which is\n                  normalized.\n              ")]),n("p",[e._v("\n                  Important note: Lucene implementation of BM25 does not have weight normalization (so, we can't test it in real life yet). But\n                 do not be discouraged - if we find it interesting, we'll implement that missing parts.\n              ")])],1),n("v-flex",{attrs:{lg12:"",sm12:""}},[n("v-checkbox",{attrs:{label:"Apply boost"},model:{value:e.useBoost,callback:function(t){e.useBoost=t},expression:"useBoost"}}),n("v-select",{attrs:{items:e.fieldBoost,label:"Select field",solo:""},model:{value:e.boostSelection,callback:function(t){e.boostSelection=t},expression:"boostSelection"}}),e._v("\n\n          This is how we can simulate document boost. You can select a field whose value will be added to the final score: TF*IDF*"),n("b",[e._v("boost")]),e._v(".\n        ")],1),n("v-flex",{attrs:{lg12:"",sm12:""}},[n("v-checkbox",{attrs:{label:"Simulate constant scores"},model:{value:e.useConstant,callback:function(t){e.useConstant=t},expression:"useConstant"}}),n("v-select",{attrs:{items:e.constFields,label:"Select",multiple:"",chips:"",hint:"What fields to consider","persistent-hint":""},model:{value:e.constSelection,callback:function(t){e.constSelection=t},expression:"constSelection"}})],1),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{staticStyle:{width:"60px"},attrs:{shrink:""}},[n("v-text-field",{staticClass:"mt-0",attrs:{"hide-details":"","single-line":"",type:"number"},model:{value:e.constRange[0],callback:function(t){e.$set(e.constRange,0,t)},expression:"constRange[0]"}})],1),n("v-flex",[n("v-range-slider",{attrs:{max:100,min:0,step:e.constStepSize},model:{value:e.constRange,callback:function(t){e.constRange=t},expression:"constRange"}})],1),n("v-flex",{staticStyle:{width:"60px"},attrs:{shrink:""}},[n("v-text-field",{staticClass:"mt-0",attrs:{"hide-details":"","single-line":"",type:"number"},model:{value:e.constRange[1],callback:function(t){e.$set(e.constRange,1,t)},expression:"constRange[1]"}}),n("v-select",{staticClass:"mt-0",attrs:{hint:"Step size",items:[.01,.1,1,10,100],"single-line":"",readonly:!1},model:{value:e.constStepSize,callback:function(t){e.constStepSize=t},expression:"constStepSize"}})],1)],1)],1)],1),n("div",[n("p",[e._v("\n              TODO: find a way to configure per field k/b/doclen\n          ")])])],1)],1),n("v-card-actions",{staticClass:"pb-3"},[n("v-spacer"),n("v-btn",{attrs:{color:"primary"},on:{click:e.onSave}},[e._v("Save")])],1)],1)},D=[],O={data:function(){return this.$store.state.experiment},methods:{closeDialog:function(){this.$parent.isActive=!1},onSave:function(){var e=this;this.$store.dispatch("saveExperiment").then(function(){e.$router.push({path:"/experiment/articles/"+e.$store.state.experiment.eid})})}}},K=O,q=Object(u["a"])(K,I,D,!1,null,null,null);q.options.__file="ExperimentOverview.vue";var T=q.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{ref:e.getRef(),staticClass:"elevation-1",attrs:{headers:e.headers,items:e.getItems(),"item-key":"docid",expand:"","rows-per-page-items":[25,50,{text:"all",value:-1}]},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",{key:e.itemKey(t.item),staticClass:"sortableRow",on:{click:function(e){t.expanded=!t.expanded}}},[n("td",{staticClass:"px-1",staticStyle:{width:"0.1%"}},[n("v-btn",{staticClass:"sortHandle",staticStyle:{cursor:"move"},attrs:{icon:""}},[n("v-icon",[e._v("drag_handle")])],1)],1),n("td",[e._v(e._s(t.item.score))]),n("td",[n("v-checkbox",{attrs:{"input-value":0!==t.item.relevant,value:t.item.docid},model:{value:e.relevant,callback:function(t){e.relevant=t},expression:"relevant"}})],1),n("td",[e._v(e._s(t.item.title[0]))]),n("td",[e._v(e._s(t.item.authors))]),n("td",[e._v(e._s(t.item.pub_raw))])])]}},{key:"expand",fn:function(t){return[n("v-card",{key:e.itemKey(t.item)+"_expand",attrs:{flat:""}},[t.item.abstract?n("div",{staticClass:"abstract"},[n("b",[e._v("abstract")]),e._v(": "+e._s(t.item.abstract)+" ")]):e._e(),t.item.formula?n("div",[n("b",[e._v("formula")]),e._v(": "+e._s(t.item.formula)+" ")]):e._e()])]}}]),model:{value:e.relevant,callback:function(t){e.relevant=t},expression:"relevant"}})},B=[],A=n("53fe"),F=n.n(A),N=n("2ef0"),M={mounted:function(){var e=this.getRef();new F.a(this.$refs[e].$el.getElementsByTagName("tbody")[0],{draggable:".sortableRow",handle:".sortHandle",onStart:this.dragStart,onEnd:this.dragReorder})},methods:{getRef:function(){return"articleTable"},getSortKey:function(){return"docid"},getItems:function(){return this.items},dragStart:function(e){var t=e.item,n=t.nextSibling;n&&n.classList.contains("datatable__expand-row")?this.expandRow=n:this.expandRow=null},dragReorder:function(e){var t=e.item,n=e.oldIndex,a=e.newIndex,s=t.nextSibling;s&&s.classList.contains("datatable__expand-row")&&s!==this.expandRow&&t.parentNode.insertBefore(t,s.nextSibling);var i=this.items.splice(n,1)[0];this.items.splice(a,0,i)},itemKey:function(e){return this.itemKeys.has(e)||this.itemKeys.set(e,++this.currentItemKey),this.itemKeys.get(e)}},data:function(){return{selected:[],expandRow:null,itemKeys:new WeakMap,currentItemKey:0,headers:[{sortable:!1},{text:"Lucene Score",value:"score",sortable:!1},{text:"Relevant",align:"left",sortable:!1,value:"relevant"},{text:"Title",align:"left",sortable:!1,value:"title"},{text:"Authors",value:"authors",sortable:!1},{text:"Publication",value:"publication",sortable:!1}]}},computed:{items:function(){return this.$store.state.papers},relevant:{get:function(){return this.$store.state.relevant},set:function(e){this.$store.dispatch("updateRelevant",{docids:e})}}}},W=M,H=(n("c94c"),Object(u["a"])(W,j,B,!1,null,null,null));H.options.__file="ListOfArticles.vue";var V,J,U=H.exports,Q={extends:U,methods:{getRef:function(){return"selectedArticles"},getSortKey:function(){return"docid"},getItems:function(){var e=N["clone"](this.items);return N["remove"](e,function(e,t,n){if(0===e.relevant)return!0}),e=N["orderBy"](e,["relevant"]),e}}},G=Q,Y=(n("77f2"),Object(u["a"])(G,V,J,!1,null,null,null));Y.options.__file="ListOfSelectedArticles.vue";var X=Y.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.experimentsHeaders,items:e.experiments,loading:!0,"hide-actions":"","item-key":"id"},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",[n("v-checkbox",{attrs:{primary:"","hide-details":""},on:{change:e.doClick},model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"props.selected"}})],1),n("td",[e._v(e._s(t.item.id))]),n("td",[e._v(e._s(t.item.k1))]),n("td",[e._v(e._s(t.item.b))]),n("td",[e._v(e._s(t.item.perfield_avgdoclen))]),n("td",[e._v(e._s(t.item.idf_normalization))]),n("td",[e._v(e._s(t.item.use_fieldboost))]),n("td",[e._v(e._s(t.item.consts))])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[n("v-progress-linear",{attrs:{slot:"progress",color:"blue"},slot:"progress"})],1)],1)],1),n("p",[e._v(" Number of combinations explored: "+e._s(e.runs)+", Time elapsed: "+e._s(e.elapsed)+" s., Progress: "+e._s(e.progress)+" ")]),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",[n(e.simulatedPapers,{tag:"component",model:{value:e.results,callback:function(t){e.results=t},expression:"results"}})],1)],1)],1)},ee=[],te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{ref:e.getRef(),staticClass:"elevation-1",attrs:{headers:e.headers,items:e.getItems(),"item-key":"docid",expand:"","rows-per-page-items":[25,50,{text:"all",value:-1}],pagination:e.pagination,"must-sort":""},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",{key:e.itemKey(t.item),on:{click:function(e){t.expanded=!t.expanded}}},[n("td",[e._v(e._s(t.item.new_score))]),n("td",[e._v(e._s(t.item.score))]),n("td",[n("v-checkbox",{attrs:{"input-value":0!==t.item.relevant,value:t.item.docid},model:{value:e.relevant,callback:function(t){e.relevant=t},expression:"relevant"}})],1),n("td",[e._v(e._s(t.item.title[0]))]),n("td",[e._v(e._s(t.item.authors))]),n("td",[e._v(e._s(t.item.pub_raw))])])]}},{key:"expand",fn:function(t){return[n("v-card",{key:e.itemKey(t.item)+"_expand",attrs:{flat:""}},[t.item.formula?n("div",[n("b",[e._v("formula")]),e._v(": "+e._s(t.item.formula)+" ")]):e._e()])]}}]),model:{value:e.relevant,callback:function(t){e.relevant=t},expression:"relevant"}})},ne=[],ae={methods:{getRef:function(){return"articleTable"},getSortKey:function(){return"new_score"},getItems:function(){return this.items},itemKey:function(e){return this.itemKeys.has(e)||this.itemKeys.set(e,++this.currentItemKey),this.itemKeys.get(e)}},data:function(){return{selected:[],expandRow:null,itemKeys:new WeakMap,currentItemKey:0,pagination:{sortBy:"new_score",descending:!0,rowsPerPage:-1},headers:[{text:"New Score",value:"new_score",sortable:!0},{text:"Lucene Score",value:"score",sortable:!0},{text:"Relevant",align:"left",sortable:!0,value:"relevant"},{text:"Title",align:"left",sortable:!1,value:"title"},{text:"Authors",value:"authors",sortable:!1},{text:"Publication",value:"publication",sortable:!1}]}},computed:{items:function(){return this.$store.state.experiment_results.papers},relevant:{get:function(){return this.$store.state.relevant},set:function(e){}}}},se=ae,ie=(n("860a"),Object(u["a"])(se,te,ne,!1,null,null,null));ie.options.__file="ListOfSimulatedArticles.vue";var re=ie.exports,oe={data:function(){return{selected:[],expandRow:null,results:[],experimentsHeaders:[{text:"id",value:"id",sortable:!1},{text:"Score",value:"score",sortable:!1},{text:"k",value:"k",sortable:!1},{text:"b",value:"b",sortable:!1},{text:"Document Length",value:"docLen",sortable:!1},{text:"Normalize Weight",value:"normalizeWeight",sortable:!1},{text:"Document Boost",value:"fieldBoost",sortable:!1},{text:"Constants",value:"consts",sortable:!1}]}},mounted:function(){this.$store.dispatch("getSimulatedResults",{eid:this.$store.state.experiment.eid,setid:0})},methods:{doClick:function(){if(this.$data.selected.length>0){var e=this.$data.selected[this.$data.selected.length-1];this.$store.dispatch("getSimulatedResults",{eid:this.$store.state.experiment.eid,setid:e.id}),this.$data.selected.length=0,this.$data.selected.push(e)}}},computed:{experiments:function(){var e=N["clone"](this.$store.state.experiment_results.results),t=[];return N["each"](e,function(e,n,a){var s={};s["id"]=n,s["score"]=e[0],N["merge"](s,e[1]),s.perdoc_boost!=={}?s.use_fieldboost=!0:s.use_fieldboost=!1,t.push(s)}),t},simulatedPapers:function(){return re},elapsed:function(){return this.$store.state.experiment_results.elapsed},runs:function(){return this.$store.state.experiment_results.runs},progress:function(){return this.$store.state.experiment_results.progress}}},le=oe,ce=(n("cc31"),Object(u["a"])(le,Z,ee,!1,null,null,null));ce.options.__file="ExperimentResults.vue";var ue=ce.exports,de=[{path:"/",component:g},{path:"/dashboard*",component:E},{path:"/experiment/overview/:id",name:"overview",component:T},{path:"/experiment/articles/:id",name:"articles",component:U},{path:"/experiment/selection/:id",name:"selection",component:X},{path:"/experiment/results/:id",name:"results",component:ue},{path:"*",component:R}],pe=de,me=n("2f62"),fe=n("bc3a"),ve=n.n(fe);a["default"].use(me["a"]),window&&window.location.toString().indexOf(":8080")>-1&&(ve.a.defaults.baseURL="http://localhost:4000/"),ve.a.defaults.headers.common["Accept"]="application/json",ve.a.defaults.headers.post["Content-Type"]="application/json";var he=function(e){var t={};N["each"](e.relevant,function(e,n,a){t[e]=n+1});var n=e.query_results.response.docs;return N["each"](n,function(e,n,a){e["hitid"]=n,t[e.docid]?e["relevant"]=t[e.docid]:e["relevant"]=0,e.author&&(e.authors=e.author.join("; "))}),n},be={dashboard:[{eid:0,query:"",reporter:"",info:"34000/300/20"}],experiment:{eid:"",query:"",extra_params:"sort=score+desc&fl=classic_factor,title,bibcode",description:"",reporter:"",useK:!0,kRange:[.01,1.8,.1],kStepSize:.1,useB:!0,bRange:[.01,1,.05],bStepSize:.1,useBoost:!1,fieldBoost:["classic_factor","cite_read_boost"],boostSelection:"",useDocLen:!1,docLenRange:[10,50,10],docStepSize:10,useNormalization:!1,normalizeWeight:!0,useConstant:!0,constFields:["first_author","author","title","abstract","keyword","identifier","bibstem","year"],constSelection:[],constRange:[0,10,1],constStepSize:1},papers:[{hitid:0,docid:23467,relevant:0,bibcode:"bibcode1",title:"Example title 0",authors:"John, D; Emil, E; Patrick, P",publication:"ApJ 2005, vol 1",abstract:"looooooooooooooooooooooong abstract..........."}],relevant:[],experiment_results:{progress:0,message:"",runs:0,results:{},papers:[]}},xe=new me["a"].Store({strict:!1,state:function(){return{dashboard:N["clone"](be.dashboard),experiment:N["clone"](be.experiment),papers:N["clone"](be.papers),relevant:N["clone"](be.relevant),experiment_results:N["clone"](be.experiment_results)}},mutations:{updateDashboard:function(e,t){e.dashboard=t.results},updateExperiment:function(e,t){var n=N["pick"](t.experiment_params,N["keys"](be.experiment)),a=N["defaults"](n,N["pick"](t,["eid","reporter","query","description"]),be.experiment);e.experiment=a,console.log("updating experiment/papers store",a),this.commit("updatePapers",t),this.commit("updateResults",t)},updatePapers:function(e,t){e.query_results=t.query_results,e.relevant=t.relevant,t.query_results&&t.query_results.response?e.papers=he(t):e.papers=[]},updateSimulatedPapers:function(e,t){e.experiment_results.papers=he(t),e.experiment_results.progress=1,e.experiment_results.message=""},updateRelevant:function(e,t){e.relevant=t.relevant},updateResults:function(e,t){e.experiment_results=N["defaults"](t.experiment_results,be.experiment_results)}},actions:{refreshDashboard:function(e){return new Promise(function(t){ve.a.get("/dashboard").then(function(n){e.commit("updateDashboard",n.data),t()})})},createExperiment:function(e){return new Promise(function(t){ve.a.get("/experiment/-1").then(function(n){e.commit("updateExperiment",n.data),t()})})},loadExperiment:function(e,t){var n=t.eid;return new Promise(function(t){ve.a.get("/experiment/"+n).then(function(n){e.commit("updateExperiment",n.data),t()})})},saveExperiment:function(e){var t=this;return new Promise(function(n){var a={verb:"save-experiment",data:t.state.experiment};a.data["kRange"][2]=a.data["kStepSize"],a.data["bRange"][2]=a.data["bStepSize"],a.data["docLenRange"][2]=a.data["docStepSize"],a.data["constRange"][2]=a.data["constStepSize"],delete a.data["fieldBoost"],delete a.data["constFields"],ve.a.post("/experiment/"+t.state.experiment.eid,a).then(function(t){e.commit("updateExperiment",t.data),n()})})},updateRelevant:function(e,t){var n=this,a=t.docids;return new Promise(function(t){var s={verb:"replace-relevant",data:a};ve.a.post("/experiment/"+n.state.experiment.eid,s).then(function(n){e.commit("updatePapers",n.data),t()})})},getResults:function(e,t){var n=t.eid;return new Promise(function(t){ve.a.post("/results/"+n).then(function(n){e.commit("updateResults",n.data),t()})})},getSimulatedResults:function(e,t){var n=t.eid,a=t.setid;return new Promise(function(t){ve.a.get("/reorder/"+n+"/"+a).then(function(n){e.commit("updateSimulatedPapers",n.data),t(n.data)})})}}});a["default"].config.productionTip=!1,a["default"].use(m["a"]);var ge=new m["a"]({routes:pe});window.app=new a["default"]({router:ge,store:xe,render:function(e){return e(p)}}).$mount("#app")},"5e4e":function(e,t,n){},"77f2":function(e,t,n){"use strict";var a=n("0b24"),s=n.n(a);s.a},"860a":function(e,t,n){"use strict";var a=n("3299"),s=n.n(a);s.a},"90e6":function(e,t,n){},c94c:function(e,t,n){"use strict";var a=n("ec31"),s=n.n(a);s.a},cc31:function(e,t,n){"use strict";var a=n("4c1c"),s=n.n(a);s.a},ec31:function(e,t,n){}});
//# sourceMappingURL=app.7c52380a.js.map